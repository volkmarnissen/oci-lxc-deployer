{
  "name": "Install/Configure Samba",
  "execute_on": "lxc",
  "description": "Install and configure Samba with multiple shares. By default, creates Samba shares for all volumes from 'Bind Multiple Volumes to LXC' (160). Optionally, additional shares can be configured.\n\nShares are created from volumes in key=value format, where the container path /<value> becomes the Samba share with name <key>.",
  "commands": [
    {
      "script": "install-samba.sh",
      "description": "Install and configure Samba with multiple shares for volumes and optional additional shares."
    }
  ],
  "parameters": [
    {
      "id": "username",
      "name": "Username",
      "type": "string",
      "default": "root",
      "description": "The username for Samba access. Default is root.",
      "advanced": true
    },
    {
      "id": "password",
      "name": "Password",
      "type": "string",
      "description": "The password for the Samba user.",
      "required": true,
      "secure": true
    },
    {
      "id": "volumes",
      "name": "Volumes",
      "type": "string",
      "description": "Volume mappings from 'Bind Multiple Volumes to LXC' (160) in key=value format, one per line. Optional permissions after comma will be ignored. Each volume will be automatically shared via Samba with share name <key> at container path /<value>. Format: key=path or key=path,permissions. Example:\ndata=/timemachine,0700\nlogs=/var/log/myapp,0755\n\nIf not provided, no automatic shares will be created.",
      "advanced": true
    },
    {
      "id": "additional_shares",
      "name": "Additional Shares",
      "type": "string",
      "default": "",
      "description": "Additional Samba shares in share_name=path format, one per line. These are shares that are not part of the volumes from template 160. Example:\nbackup=/mnt/backup\npublic=/var/www/public\n\nIf not provided, no additional shares will be created.",
      "advanced": true
    },
    {
      "id": "uid",
      "name": "UID",
      "type": "string",
      "default": "0",
      "description": "UID for setting permissions on Samba share directories. Should match the UID from 'Bind Multiple Volumes to LXC' (160) if volumes are used. Default is 0 (root).",
      "advanced": true
    },
    {
      "id": "gid",
      "name": "GID",
      "type": "string",
      "default": "0",
      "description": "GID for setting permissions on Samba share directories. Should match the GID from 'Bind Multiple Volumes to LXC' (160) if volumes are used. Default is 0 (root).",
      "advanced": true
    },
    {
      "id": "allow-guest",
      "name": "Allow Guest Access",
      "type": "boolean",
      "default": false,
      "description": "Enable guest access to Samba shares. If enabled, shares will be accessible without authentication.",
      "advanced": true
    }
  ]
}
