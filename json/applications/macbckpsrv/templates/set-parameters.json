{
  "execute_on": "ve",
  "name": "Backup Share Parameters",
  "description": "Set application-specific parameters for Mac OS Time Machine Backup Server",
  "parameters": [
    {
      "id": "hostname",
      "name": "Hostname",
      "type": "string",
      "default": "macbckpsrv",
      "required": true,
      "description": "Hostname for the Mac OS Time Machine Backup Server container"
    },
    {
      "id": "username",
      "name": "Username",
      "type": "string",
      "default": "macbckpsrv",
      "required": true,
      "description": "Username for the Mac OS Time Machine Backup Server container"
    },
    {
      "id": "password",
      "name": "Password",
      "type": "string",
      "description": "The password for the Samba user.",
      "required": true,
      "secure": true
    },
    {
      "id": "uid",
      "name": "UID",
      "type": "string",
      "default": "1000",
      "description": "UID for the user and mount permissions. Will be used consistently on VE host and LXC container.",
      "advanced": true
    },
    {
      "id": "gid",
      "name": "GID",
      "type": "string",
      "default": "1000",
      "description": "GID for the user and mount permissions. Will be used consistently on VE host and LXC container.",
      "advanced": true
    },
    {
      "id": "share_name",
      "name": "Share Name",
      "type": "string",
      "default": "backup",
      "description": "Name of the Samba share for Time Machine backups.",
      "advanced": true
    }
  ],
  "commands": [
    {
      "properties": [
        { "id": "ostype", "value": "debian" },
        { "id": "volumes", "value": "timemachine=timemachine" },
        { "id": "envs", "value": "USERNAME={{username}}\nPASSWORD={{password}}\nSHARE_NAME={{share_name}}" },
        { "id": "packages", "value": "samba avahi-daemon" }
      ]
    }
  ]
}
