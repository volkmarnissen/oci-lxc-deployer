{
  "name": "Map Disk to LXC Container",
  "description": "Mounts a block device (by UUID) from the Proxmox host into an LXC container as a bind mount, with UID/GID mapping.\n\nThis template can be called independently of the LXC container's state (running or stopped) and is safe to call multiple times (idempotent), e.g. before using the share.",
  "execute_on": "ve",
  "parameters": [
    {
      "id": "vm_id",
      "name": "ID of the LXC Container",
      "type": "string",
      "required": true,
      "description": "ID of the LXC container to which the disk will be mapped."
    },
    {
      "id": "host_device_uuid",
      "name": "UUID of the block device",
      "type": "enum",
      "required": true,
      "enumValuesTemplate": "map-disk-uuids.json",
      "description": "UUID of the block device to be mounted."
    },
    {
      "id": "disk_size",
      "name": "Disk size",
      "type": "string",
      "required": true,
      "description": "Disk size (for documentation/logging only, not used for mounting)."
    },
    {
      "id": "mountpoint",
      "name": "Mount point host & container",
      "type": "string",
      "required": true,
      "default": "/mnt/backupdisk",
      "description": "Mount point on the Proxmox host and inside the container."
    },
    {
      "id": "uid",
      "name": "UID for mount directory",
      "type": "string",
      "required": true,
      "description": "UID to set for the mount directory and bind mount."
    },
    {
      "id": "gid",
      "name": "GID for mount directory",
      "type": "string",
      "required": true,
      "description": "GID to set for the mount directory and bind mount."
    }
  ],
  "commands": [
    {
      "script": "map-disk.sh",
      "description": "Executes the script to map the disk by UUID and set up the bind mount in the container."
    }
  ]
}
